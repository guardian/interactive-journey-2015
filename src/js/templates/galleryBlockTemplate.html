<!-- Section: Photo gallert example. Start. -->
<figure class="gusto-section gusto-section-gallery {{ class }} {{^class}}gusto-restrict-outer{{/class}} {{#swipe}} swipe {{/swipe}}">

    {{ #headline }}
    <div class='gusto-section-header'>
      <h2 class='gusto-headline gusto-headline-medium'>{{ headline }}</h2>
      <p>{{ caption }}</p>
    </div>
    {{ /headline }}

    <!-- Slider main container -->
    <div class="swiper-container">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
            
          
            {{ #images }}
                <div class="swiper-slide">
                    <img class="gusto-photo gusto-gallary-photo"
                         decorator='lazyload:{src:{{src}},imgSizes:{{size}},srcAlt:{{src_alt}} }'
                         alt="{{ alt }}"
                         style="{{^swipe}} width: {{ 100 / columns }}%; {{/swipe}}" />
                </div>
            {{ /images }}        
        </div>
     
        
        <!-- If we need navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
     
    </div>

    {{ #caption && !headline }}
    <figcaption class="gusto-caption gusto-restrict-inner">
        {{{ caption }}}
    </figcaption>
	{{ /caption }}
    
    
</figure>
<!-- Section: Photo gallert example. End. -->




<script>
  component.exports = {
      oncomplete : function(){
        var mySwiper;
        var el = this.fragment.items[0].node;
        var swipEl = el.querySelector('.swiper-container');
          
        function isNarrow() {
          return window.innerWidth < 660;   
        }
        
        function addSwiper() {
          el.classList.add('swipe');
          mySwiper = new Swiper(swipEl, {
            direction: 'horizontal',
            loop: false,
            // pagination: '.swiper-pagination',
            nextButton: el.querySelector('.swiper-button-next'),
            prevButton: el.querySelector('.swiper-button-prev'),
            onResize: function() {
              console.log(window.innerWidth);
            }
          });
        }
        
        function initSwiper() {
          var hasClass = el.classList.contains('swipe');
          if (isNarrow() && !hasClass) {
            addSwiper(); 
          }
          
          if (!isNarrow() && hasClass) {
            mySwiper.destroy(true, true);
            el.classList.remove('swipe');
          }
        }
        
        initSwiper();
        
        // Toggle swipe based on viewport width
        window.addEventListener('resize', initSwiper, false);
    }
  };
  
  </script>