/**
 * Project: Project name 
 * File:    Main SCSS
 */
$guss-webfonts-base-url: '//pasteup.guim.co.uk/fonts/';
@import 'bower_components/pasteup-palette/src/_palette';
@import 'bower_components/guss-webfonts/src/_webfonts.scss';
@import 'bower_components/guss-typography/_typography.scss';
@import 'modules/columns';
@import 'modules/swiper';
@include guss-webfonts();
@include guss-typography-defaults;

// From https://github.com/guardian/frontend/blob/master/static/src/stylesheets/_vars.scss
$breakpoints: (
    mobile:           320px,
    mobileLandscape:  480px,
    phablet:          660px,
    tablet:           740px,
    desktop:          980px,
    leftCol:          1140px,
    wide:             1300px
);

$colWidth: 220px;

$outerColumnWidth: (map-get($breakpoints, 'wide') - map-get($breakpoints, 'phablet')) / 2;

// Reset
body,
figure {
    margin: 0;
    padding: 0;
    
    // Aspect ratio breakpoints
    @media screen and (max-aspect-ratio: 16/9) { 
          //background: rgb(240, 255, 255) !important;
    }
    @media screen and (min-aspect-ratio: 16/9) { 
          //background: rgb(255, 245, 255) !important;
    }
}

.interactive {
    margin: 0;
    position: relative;
    background: #f1f1f1;
}

.interactive * {
    box-sizing: border-box;
}

.interactive::before, .interactive::after {
    background: rgba(0,0,0,0.025);
    height: 100%;
    position: absolute;
    content: " ";
    z-index: 0;
}
.interactive::after {
    right: 0;
    top: 0;
}

.gusto-viewport-full {
    position: relative;
    z-index: 1;
}

.gusto-header {
    background-size: cover;
    height: 80vh;
//    padding: 3rem 10px 1rem 10px;
    background-position: 50%;
    color: #FFF;

}

.gusto-header-content-inner {
    position: absolute;
    padding: 20px 10px;
    
    &.top {
        top: 0;
    }
    &.bottom {
        bottom: 0;
    }
    &.left {
        left: 0;
    }
    &.right {
        right: 0;
    }
    &.shadow {
        text-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

}

.gusto-header-content {
    width: 100%;
    height: inherit; // Fixes Safari vh bug
    margin: 0px auto;
    position: relative;
}

.gusto-restrict-inner {
    max-width:  map-get($breakpoints, 'phablet');
    margin: 0 auto;
    padding: 0 10px;

}

.gusto-restrict-mid {
    max-width: map-get($breakpoints, 'desktop');
    margin: 0 auto;
    padding: 0 10px;
    position: relative;
}

.gusto-restrict-outer {
    max-width: map-get($breakpoints, 'wide');
    margin: 0 auto;
    padding: 0 10px;
    position: relative;
}

.gusto-headline {
    margin: 0;
}

.gusto-headline-big {
    font-size: 36px;
    line-height: 1;
    margin: 0;
}

.gusto-headline-medium {
    line-height: 1;
    font-size: 18px;
    color: #767676;
    margin-bottom: 5px;
}

.gusto-sub-heading {
    font-weight: 500;
    font-size: 18px;
    margin: 0;
}

.gusto-kicker {
    font-weight: 200;
    font-size: 24px;
    margin: 0;
}

.gusto-video {
    width: 100%;
    display: block;
    background: #000;
    cursor: pointer;
}

.gusto-video-wrapper {
    position: relative;
    padding: 0;
    
    &:hover .gusto-video-cover {
        opacity: 1;   
    }
}

.gusto-video-cover {
    position: absolute;
    pointer-events: none;
    display: block;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    position: absolute;
    top: 0;
    left: 0;
    z-index: 899999999;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gust-video-play-btn {
    width: 80px;
    position: relative;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    
    .guPause {
        display: none;
    }
}

.isPlaying {
    .guPause {
        display: block;
    }
    
    .guPlay{
        display: none;
    }
}

.gusto-section {
    margin-top: 2rem;
    margin-bottom: 2rem;
}

.gusto-section-header {
    position: relative;
    padding: 10px 10px 15px 0;
    max-width: 640px;
    text-align: left;
    
    p {
        margin-top: 0;
        line-height: 1.25;
        font-size: 14px;
        color: #333;
    }
}

.gusto-audio-player p {
    margin-top: 0;
        line-height: 1.25;
        font-size: 14px;
        color: #333;
}

.gusto-section-header::before {
    width: 110px;
    height: 1px;
    background: #dcdcdc;
    content: '';
    position: absolute;
    top: 0;
}


// Edge-2-edge
.gusto-edge-noclip {
    height: auto;
    width: 100vw;
    margin: 0 auto;
    display: block;
    
    @media screen and (min-aspect-ratio: 16/9) {
        height: 100vh;
        width: auto;
    }
}

.gusto-edge-clip {
    height: 100vh;
    width: 100%;
    margin: 0 auto;
    display: block;
    
    transform: translateX(-50%);
    left: 50%;
    position: relative;
    
    @media screen and (min-aspect-ratio: 16/9) {
        height: auto;
        width: 100vw;
        top: 50%;
        transform: translateY(-50%);
        left: 0;
    }
}
.gusto-edge-clip-container {
    overflow: hidden;
    width: 100%;
    
    @media screen and (min-aspect-ratio: 16/9) {
        height: 100vh;
    }
}


@keyframes photoPanAnimation {
  0%   { transform: translateX(-50%); }
  50%  { transform: translateX(-100%); }
  0%   { transform: translateX(-50%); }
}

.gusto-edge-clip-anim {
//    left: 100%;
//    animation: photoPanAnimation calc(2*60s) infinite; 
//    transition-timing-function: ease-in-out;  
}


// Figure caption
.gusto-caption {
    font-family: 'Guardian Text Sans Web', sans-serif;
    font-size: 0.9rem;
    text-align: left;

}

// Pull blocks
.gusto-section-pull {
    margin: 0 auto;    
}

.gusto-pull {
    font-family: 'Guardian Text Sans Web', sans-serif;
    font-size: 0.8rem;
    overflow: hidden;
    width: auto;
        
    @media only screen and (min-width: map-get($breakpoints, 'desktop')) {
        width: calc((100vw - 660px )/ 2);
    }
    @media only screen and (min-width: map-get($breakpoints, 'wide')) {        
        max-width: $outerColumnWidth;
    }
    
}
.gusto-pull-left {
    padding-right: 10px;
    @media only screen and (min-width: map-get($breakpoints, 'desktop')) {
        float: left;
        margin-left: calc(((100vw - 660px) /2) * -1);
    }
    @media only screen and (min-width: map-get($breakpoints, 'wide')) {
        margin-left: $outerColumnWidth * -1;
    }
}
.gusto-pull-right {
    padding-left: 10px;
    @media only screen and (min-width: map-get($breakpoints, 'desktop')) {
        float: right;
        margin-right: calc(((100vw - 660px) /2) * -1);
    }
    @media only screen and (min-width: map-get($breakpoints, 'wide')) {
        margin-right: $outerColumnWidth * -1;
    }
 }

// Photos
.gusto-photo-pull {
    float: left;
    margin: 0 4px 4px 0;
}

.gusto-section-photo .gusto-photo {
    width: 100%;
}

.gusto-section-photo .gusto-photo.gusto-edge-clip {
    width: auto;
}


// Gallery
.gusto-section-gallery {
    overflow: hidden;
    clear: both;
    text-align: center;
}

.gusto-gallary-photo {  
    box-sizing: border-box;
    display: inline-block;
    line-height: 0;
    vertical-align: middle;
    width: 100%;
    
}

.swipe .gusto-gallary-photo {
    width: 100%;
    padding: 0;
}

// Author meta
.gusto-author-photo {
  float: left;
  margin: 0 10px 10px 0; 
}

.gusto-author-copy {
    margin: 0;    
}

// Fun margin columns
.left-column {
    @media only screen and (min-width: map-get($breakpoints, 'desktop')) {
        margin-left: calc(((100vw - #{map-get($breakpoints, 'desktop')}) / 2 ) + #{$colWidth});
    }    
    @media only screen and (min-width: map-get($breakpoints, 'leftCol')) {
        margin-left: calc(((100vw - #{map-get($breakpoints, 'leftCol')}) / 2 ) + #{$colWidth});
    } 
    @media only screen and (min-width: map-get($breakpoints, 'wide')) {
        margin-left: calc(((100vw - #{map-get($breakpoints, 'wide')}) / 2 ) + #{$colWidth});
    }
}

.right-column {
    @media only screen and (min-width: map-get($breakpoints, 'desktop')) {
        $leftCol: #{ (map-get($breakpoints, 'desktop') - map-get($breakpoints, 'phablet')) - $colWidth };
        margin-left: calc(((100vw - #{map-get($breakpoints, 'desktop')}) / 2 ) +  #{$leftCol} );
    }    
    @media only screen and (min-width: map-get($breakpoints, 'leftCol')) {
        $leftCol: #{ (map-get($breakpoints, 'leftCol') - map-get($breakpoints, 'phablet')) - $colWidth };
        margin-left: calc(((100vw - #{map-get($breakpoints, 'leftCol')}) / 2 ) + #{ $leftCol} );
    } 
    @media only screen and (min-width: map-get($breakpoints, 'wide')) {
        $leftCol: #{ (map-get($breakpoints, 'wide') - map-get($breakpoints, 'phablet')) - $colWidth };
        margin-left: calc(((100vw - #{map-get($breakpoints, 'wide')}) / 2 ) + #{$leftCol} );
    }
}


//breakpoint enhancements
@media (min-width: 740px){


    .gusto-header-content {
        max-width: 740px;
    }
}

@media (min-width: 980px){
    .interactive::before, .interactive::after {
        width: calc((100% - 61.25rem) / 2);
    }

    .gusto-header-content {
        max-width: 980px;
    }

    .gusto-header-content-inner {
        max-width: 460px;
    }

    .gusto-headline-big {
        font-size: 54px;
    }
}

@media (min-width: 1140px){
    .interactive::before, .interactive::after {
        width: calc((100% - 71.25rem) / 2);
    }

    .gusto-header-content {
        max-width: 1140px;
    }

    .gusto-header-content-inner {
        max-width: 640px;
    }

    .gusto-headline-big {
        font-size: 60px;
    }

     .gusto-section-header {
         margin-left: 170px;
     }

    .gusto-section-header-left {
        overflow: visible;

    }

    .gusto-section-header-left .gusto-section-header {
        position: absolute;
        bottom: 100%;
        right: 0;
        width: $colWidth;
        margin-left: calc(((100vw - #{map-get($breakpoints, 'leftCol')}) / 2 ) );
    }
}

@media (min-width: 1300px){
    .interactive::before, .interactive::after {
        width: calc((100% - 81.25rem) / 2);
    }

    .gusto-header-content {
        max-width: 1300px;

    }

    .gusto-header-content-inner {

        &.left {
            left: 230px;
        }
        &.right {
            right: 0px;
            min-width: 460px;
        }

    }

    .gusto-headline-big {
        font-size: 72px;
    }

     .gusto-section-header {
         margin-left: 180px;
     }

    .gusto-section-header-left .gusto-section-header {
        margin-left: 0;
    }
}
